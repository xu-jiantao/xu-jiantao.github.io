<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>英语单词小测验</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4361ee',
            secondary: '#ffb703',
            success: '#2a9d8f',
            warning: '#e9c46a',
            danger: '#e63946',
            light: '#f8f9fa',
            dark: '#212529',
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            display: ['"Comic Sans MS"', 'cursive', 'sans-serif'],
            certificate: ['"Times New Roman"', 'serif'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }
      .certificate-border {
        border-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11,18.8c3.8-2,7.8-3.8,12.1-5.2c4.8-1.6,9.8-2.8,15-3.6V0h10v10.1c5.3,0.8,10.4,2.1,15.2,3.9c4.3,1.6,8.3,3.4,11.9,5.6l3.3-3.3l9.9,9.9l-3.3,3.3c-2.2,2.2-4.5,4.3-7.1,6c-2.4,1.6-5.1,2.9-8,3.9V100h-10V89.8c-2.8,0.9-5.8,1.6-9,2c-3.3,0.4-6.6,0.4-9.8,0c-3.2-0.4-6.3-1.1-9.1-2.1c-2.8-1-5.4-2.3-7.7-3.9l-3.4,3.4l-9.9-9.9l3.4-3.4c2.4-2.4,4.5-4.8,6.4-7.3c1.9-2.5,3.5-5.2,4.8-8.1c-2.5-1-4.9-2.4-7.1-4.1c-2.1-1.7-3.9-3.7-5.3-6l-3.4,3.4L11,18.8z M35,25.9c-3.1,1.2-6.2,2.9-9.1,5.1c-2.9,2.2-5.3,4.9-7.1,8c-1.8,3.1-2.7,6.5-2.7,10.1v38.2c0,3.6,0.9,7,2.7,10.1c1.8,3.1,4.2,5.8,7.1,8c2.9,2.2,6,3.9,9.1,5.1V25.9z M85,25.9V89.8c3.1-1.2,6.2-2.9,9.1-5.1c2.9-2.2,5.3-4.9,7.1-8c1.8-3.1,2.7-6.5,2.7-10.1V44.1c0-3.6-0.9-7-2.7-10.1c-1.8-3.1-4.2-5.8-7.1-8C91.2,28.8,88.1,27.1,85,25.9z' fill='%23ffb703' fill-opacity='0.5' fill-rule='evenodd'/%3E%3C/svg%3E") 30 round;
        border-width: 8px;
      }
      .quiz-appear {
        animation: fadeIn 0.8s ease-out forwards;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .progress-bar {
        transition: width 0.5s ease-in-out;
      }
      .celebration {
        animation: celebrate 1.5s ease-in-out;
      }
      @keyframes celebrate {
        0% { transform: scale(1); }
        50% { transform: scale(1.05) rotate(2deg); }
        100% { transform: scale(1); }
      }
      .certificate-appear {
        animation: slideUp 0.8s ease-out forwards;
      }
      @keyframes slideUp {
        from { opacity: 0; transform: translateY(50px); }
        to { opacity: 1; transform: translateY(0); }
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
  <!-- 顶部导航 -->
  <header class="bg-primary text-white shadow-lg">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-book text-2xl"></i>
        <h1 class="text-xl md:text-2xl font-bold">英语单词小测验</h1>
      </div>
      <div class="hidden md:flex items-center space-x-6">
        <a href="#" class="hover:text-secondary transition-colors duration-300 flex items-center">
          <i class="fa fa-home mr-1"></i> 首页
        </a>
        <a href="#" class="hover:text-secondary transition-colors duration-300 flex items-center">
          <i class="fa fa-graduation-cap mr-1"></i> 学习资料
        </a>
        <a href="#" class="hover:text-secondary transition-colors duration-300 flex items-center">
          <i class="fa fa-trophy mr-1"></i> 我的证书
        </a>
      </div>
      <button class="md:hidden text-xl">
        <i class="fa fa-bars"></i>
      </button>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8">
    <!-- 欢迎页面 -->
    <section id="welcome-screen" class="quiz-appear max-w-3xl mx-auto bg-white rounded-xl shadow-xl p-8 md:p-12">
      <div class="text-center mb-8">
        <div class="inline-block p-4 rounded-full bg-primary/10 mb-4">
          <i class="fa fa-star text-4xl text-primary"></i>
        </div>
        <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-3">欢迎参加英语单词小测验！</h2>
        <p class="text-gray-600 mb-6">测试你的英语词汇量，完成后将获得专属荣誉证书！</p>

        <div class="flex flex-col sm:flex-row justify-center gap-4 mb-8">
          <div class="bg-light p-4 rounded-lg shadow-sm text-center flex-1">
            <i class="fa fa-check-circle text-success text-2xl mb-2"></i>
            <h3 class="font-bold text-lg mb-1">1-2年级词汇</h3>
            <p class="text-sm text-gray-600">基础日常单词</p>
          </div>
          <div class="bg-light p-4 rounded-lg shadow-sm text-center flex-1">
            <i class="fa fa-star text-warning text-2xl mb-2"></i>
            <h3 class="font-bold text-lg mb-1">3-4年级词汇</h3>
            <p class="text-sm text-gray-600">进阶生活用语</p>
          </div>
        </div>

        <div class="mb-6">
          <label for="grade-level" class="block text-gray-700 font-medium mb-2">选择年级：</label>
          <select id="grade-level" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
            <option value="1-2">1-2年级</option>
            <option value="3-4">3-4年级</option>
          </select>
        </div>

        <button id="start-quiz" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 flex items-center mx-auto">
          <i class="fa fa-play-circle mr-2"></i> 开始测验
        </button>
      </div>
    </section>

    <!-- 测验页面 -->
    <section id="quiz-screen" class="hidden max-w-3xl mx-auto bg-white rounded-xl shadow-xl p-8 md:p-12">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-2xl font-bold text-dark">单词测验</h2>
          <p class="text-gray-600" id="quiz-progress">问题 1/10</p>
        </div>
        <div class="bg-light p-2 rounded-full">
          <span id="timer" class="font-mono text-dark">00:00</span>
        </div>
      </div>

      <div class="mb-8">
        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
          <div id="progress-bar" class="bg-primary h-2.5 rounded-full progress-bar" style="width: 10%"></div>
        </div>
      </div>

      <div id="question-container" class="mb-8">
        <div class="bg-light p-6 rounded-lg mb-6">
          <h3 class="text-xl font-semibold mb-4" id="question-text">“apple”的中文意思是什么？</h3>
          <div id="options-container" class="space-y-3">
            <button class="option-btn w-full text-left p-4 border border-gray-300 rounded-lg hover:border-primary hover:bg-primary/5 transition-colors duration-300">
              香蕉
            </button>
            <button class="option-btn w-full text-left p-4 border border-gray-300 rounded-lg hover:border-primary hover:bg-primary/5 transition-colors duration-300">
              苹果
            </button>
            <button class="option-btn w-full text-left p-4 border border-gray-300 rounded-lg hover:border-primary hover:bg-primary/5 transition-colors duration-300">
              橙子
            </button>
            <button class="option-btn w-full text-left p-4 border border-gray-300 rounded-lg hover:border-primary hover:bg-primary/5 transition-colors duration-300">
              葡萄
            </button>
          </div>
        </div>
      </div>

      <div class="flex justify-between">
        <button id="prev-question" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-6 rounded-full transition-colors duration-300 flex items-center">
          <i class="fa fa-arrow-left mr-2"></i> 上一题
        </button>
        <button id="next-question" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-6 rounded-full transition-colors duration-300 flex items-center">
          下一题 <i class="fa fa-arrow-right ml-2"></i>
        </button>
      </div>
    </section>

    <!-- 结果页面 -->
    <section id="result-screen" class="hidden max-w-3xl mx-auto bg-white rounded-xl shadow-xl p-8 md:p-12">
      <div class="text-center mb-8">
        <div class="inline-block p-4 rounded-full bg-success/10 mb-4 celebration">
          <i class="fa fa-trophy text-4xl text-success"></i>
        </div>
        <h2 class="text-2xl font-bold text-dark mb-2">测验完成！</h2>
        <p class="text-gray-600 mb-6">看看你的成绩如何</p>

        <div class="bg-light p-6 rounded-lg max-w-md mx-auto mb-8">
          <div class="flex justify-between items-center mb-4">
            <span class="font-medium">正确题数：</span>
            <span class="text-xl font-bold text-success" id="correct-count">8</span>
          </div>
          <div class="flex justify-between items-center mb-4">
            <span class="font-medium">错误题数：</span>
            <span class="text-xl font-bold text-danger" id="incorrect-count">2</span>
          </div>
          <div class="flex justify-between items-center mb-6">
            <span class="font-medium">得分：</span>
            <span class="text-2xl font-bold text-primary" id="score">80</span>
          </div>

          <div class="w-full bg-gray-200 rounded-full h-4 mb-2">
            <div id="score-bar" class="bg-success h-4 rounded-full progress-bar" style="width: 80%"></div>
          </div>
          <p class="text-sm text-gray-500" id="performance-text">做得很好！你对这些单词掌握得很不错。</p>
        </div>

        <div class="mb-8">
          <label for="student-name" class="block text-gray-700 font-medium mb-2">输入你的名字：</label>
          <input type="text" id="student-name" placeholder="请输入你的姓名" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
        </div>

        <button id="generate-certificate" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 flex items-center mx-auto">
          <i class="fa fa-certificate mr-2"></i> 生成荣誉证书
        </button>
      </div>
    </section>

    <!-- 证书页面 -->
    <section id="certificate-screen" class="hidden max-w-4xl mx-auto py-8">
      <div class="certificate-appear certificate-border bg-white p-8 md:p-12 relative overflow-hidden">
        <!-- 装饰元素 -->
        <div class="absolute top-0 left-0 w-full h-full pointer-events-none">
          <div class="absolute top-4 left-4 text-primary/10 text-6xl">
            <i class="fa fa-graduation-cap"></i>
          </div>
          <div class="absolute bottom-4 right-4 text-primary/10 text-6xl">
            <i class="fa fa-certificate"></i>
          </div>
          <div class="absolute top-1/2 left-4 text-primary/10 text-4xl transform -translate-y-1/2">
            <i class="fa fa-book"></i>
          </div>
          <div class="absolute top-1/2 right-4 text-primary/10 text-4xl transform -translate-y-1/2">
            <i class="fa fa-book"></i>
          </div>
        </div>

        <div class="relative z-10 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-primary mb-2 font-certificate">荣誉证书</h2>
          <div class="w-20 h-1 bg-secondary mx-auto mb-8"></div>

          <p class="text-lg mb-6 font-certificate">兹证明</p>
          <h3 class="text-2xl md:text-3xl font-bold mb-6 text-dark" id="certificate-name">小明</h3>
          <p class="text-lg mb-2 font-certificate">在英语单词测验中表现优异，</p>
          <p class="text-lg mb-8 font-certificate">获得了 <span class="text-xl font-bold text-primary" id="certificate-score">80</span> 分的好成绩</p>

          <div class="flex justify-center space-x-8 mb-8">
            <div class="flex-1 max-w-xs">
              <div class="h-32 flex items-center justify-center mb-2">
                <div class="w-24 h-24 rounded-full bg-primary/10 flex items-center justify-center">
                  <i class="fa fa-star text-4xl text-primary"></i>
                </div>
              </div>
              <p class="font-medium text-dark">优秀的词汇量</p>
            </div>
            <div class="flex-1 max-w-xs">
              <div class="h-32 flex items-center justify-center mb-2">
                <div class="w-24 h-24 rounded-full bg-secondary/10 flex items-center justify-center">
                  <i class="fa fa-lightbulb-o text-4xl text-secondary"></i>
                </div>
              </div>
              <p class="font-medium text-dark">出色的学习能力</p>
            </div>
            <div class="flex-1 max-w-xs">
              <div class="h-32 flex items-center justify-center mb-2">
                <div class="w-24 h-24 rounded-full bg-success/10 flex items-center justify-center">
                  <i class="fa fa-trophy text-4xl text-success"></i>
                </div>
              </div>
              <p class="font-medium text-dark">值得表扬的努力</p>
            </div>
          </div>

          <div class="flex justify-between items-end mt-12">
            <div class="text-left">
              <p class="text-sm text-gray-600 mb-1">日期</p>
              <p class="font-medium" id="certificate-date">2025年7月11日</p>
            </div>
            <div class="text-right">
              <div class="w-32 h-12 mb-2 border-b-2 border-gray-400"></div>
              <p class="font-medium">英语老师</p>
            </div>
          </div>
        </div>
      </div>

      <div class="flex justify-center mt-8 space-x-4">
        <button id="save-certificate" class="bg-primary hover:bg-primary/90 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 flex items-center">
          <i class="fa fa-download mr-2"></i> 保存证书
        </button>
        <button id="restart-quiz" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 flex items-center">
          <i class="fa fa-refresh mr-2"></i> 重新测验
        </button>
      </div>
    </section>
  </main>

  <footer class="bg-dark text-white mt-12">
    <div class="container mx-auto px-4 py-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-6 md:mb-0">
          <div class="flex items-center space-x-2">
            <i class="fa fa-book text-2xl"></i>
            <h2 class="text-xl font-bold">英语单词小测验</h2>
          </div>
          <p class="text-gray-400 mt-2">帮助小学生提高英语词汇量</p>
        </div>
        <div class="flex space-x-6">
          <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
            <i class="fa fa-facebook"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
            <i class="fa fa-twitter"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
            <i class="fa fa-instagram"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
            <i class="fa fa-youtube"></i>
          </a>
        </div>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
        <p>&copy; 2025 英语单词小测验. 保留所有权利.</p>
      </div>
    </div>
  </footer>

  <script>
    // 单词数据库
    const vocabularyDB = {
      '1-2': [
        { english: "apple", chinese: "苹果", options: ["香蕉", "苹果", "橙子", "葡萄"] },
        { english: "book", chinese: "书", options: ["铅笔", "书", "尺子", "橡皮"] },
        { english: "cat", chinese: "猫", options: ["狗", "猫", "鸟", "鱼"] },
        { english: "dog", chinese: "狗", options: ["猪", "羊", "狗", "牛"] },
        { english: "egg", chinese: "鸡蛋", options: ["面包", "牛奶", "鸡蛋", "米饭"] },
        { english: "fish", chinese: "鱼", options: ["肉", "鱼", "鸡", "鸭"] },
        { english: "goat", chinese: "山羊", options: ["马", "山羊", "兔子", "老鼠"] },
        { english: "hat", chinese: "帽子", options: ["衣服", "裤子", "帽子", "鞋子"] },
        { english: "ice", chinese: "冰", options: ["水", "火", "冰", "土"] },
        { english: "juice", chinese: "果汁", options: ["茶", "咖啡", "果汁", "牛奶"] },
        { english: "kite", chinese: "风筝", options: ["气球", "风筝", "飞机", "船"] },
        { english: "lion", chinese: "狮子", options: ["老虎", "狮子", "大象", "熊猫"] },
        { english: "milk", chinese: "牛奶", options: ["果汁", "水", "牛奶", "可乐"] },
        { english: "nose", chinese: "鼻子", options: ["眼睛", "耳朵", "鼻子", "嘴巴"] },
        { english: "orange", chinese: "橙子", options: ["苹果", "香蕉", "橙子", "草莓"] },
        { english: "pen", chinese: "钢笔", options: ["铅笔", "钢笔", "尺子", "橡皮"] },
        { english: "queen", chinese: "女王", options: ["国王", "女王", "公主", "王子"] },
        { english: "rabbit", chinese: "兔子", options: ["猫", "狗", "兔子", "老鼠"] },
        { english: "sun", chinese: "太阳", options: ["月亮", "星星", "太阳", "云"] },
        { english: "tiger", chinese: "老虎", options: ["狮子", "老虎", "大象", "熊猫"] },
        { english: "umbrella", chinese: "雨伞", options: ["雨衣", "雨伞", "帽子", "鞋子"] },
        { english: "violin", chinese: "小提琴", options: ["钢琴", "小提琴", "吉他", "鼓"] },
        { english: "water", chinese: "水", options: ["火", "水", "土", "空气"] },
        { english: "box", chinese: "盒子", options: ["袋子", "盒子", "包", "篮子"] },
        { english: "yellow", chinese: "黄色", options: ["红色", "蓝色", "黄色", "绿色"] },
        { english: "zoo", chinese: "动物园", options: ["公园", "学校", "动物园", "医院"] }
      ],
      '3-4': [
        { english: "beautiful", chinese: "美丽的", options: ["丑陋的", "美丽的", "高大的", "矮小的"] },
        { english: "computer", chinese: "电脑", options: ["电视", "电脑", "手机", "平板"] },
        { english: "delicious", chinese: "美味的", options: ["难吃的", "美味的", "甜的", "苦的"] },
        { english: "elephant", chinese: "大象", options: ["狮子", "老虎", "大象", "熊猫"] },
        { english: "family", chinese: "家庭", options: ["朋友", "同学", "老师", "家庭"] },
        { english: "garden", chinese: "花园", options: ["公园", "花园", "学校", "医院"] },
        { english: "hospital", chinese: "医院", options: ["学校", "医院", "商店", "图书馆"] },
        { english: "interesting", chinese: "有趣的", options: ["无聊的", "有趣的", "困难的", "简单的"] },
        { english: "jungle", chinese: "丛林", options: ["森林", "丛林", "沙漠", "草原"] },
        { english: "knowledge", chinese: "知识", options: ["智慧", "知识", "力量", "勇气"] },
        { english: "library", chinese: "图书馆", options: ["学校", "图书馆", "商店", "医院"] },
        { english: "mountain", chinese: "山", options: ["河", "湖", "山", "海"] },
        { english: "night", chinese: "夜晚", options: ["白天", "夜晚", "早晨", "下午"] },
        { english: "ocean", chinese: "海洋", options: ["河", "湖", "山", "海洋"] },
        { english: "piano", chinese: "钢琴", options: ["钢琴", "小提琴", "吉他", "鼓"] },
        { english: "quiet", chinese: "安静的", options: ["吵闹的", "安静的", "快的", "慢的"] },
        { english: "rainbow", chinese: "彩虹", options: ["太阳", "月亮", "星星", "彩虹"] },
        { english: "school", chinese: "学校", options: ["家庭", "学校", "商店", "医院"] },
        { english: "table", chinese: "桌子", options: ["椅子", "桌子", "床", "沙发"] },
        { english: "umbrella", chinese: "雨伞", options: ["雨衣", "雨伞", "帽子", "鞋子"] },
        { english: "violin", chinese: "小提琴", options: ["钢琴", "小提琴", "吉他", "鼓"] },
        { english: "window", chinese: "窗户", options: ["门", "窗户", "墙", "地板"] },
        { english: "yellow", chinese: "黄色", options: ["红色", "蓝色", "黄色", "绿色"] },
        { english: "zebra", chinese: "斑马", options: ["马", "斑马", "鹿", "骆驼"] },
        { english: "angry", chinese: "生气的", options: ["高兴的", "伤心的", "生气的", "害怕的"] },
        { english: "brave", chinese: "勇敢的", options: ["胆小的", "勇敢的", "聪明的", "愚蠢的"] },
        { english: "clever", chinese: "聪明的", options: ["愚蠢的", "聪明的", "高的", "矮的"] },
        { english: "dangerous", chinese: "危险的", options: ["安全的", "危险的", "容易的", "困难的"] },
        { english: "excited", chinese: "兴奋的", options: ["无聊的", "兴奋的", "累的", "困的"] },
        { english: "friendly", chinese: "友好的", options: ["不友好的", "友好的", "善良的", "邪恶的"] }
      ]
    };

    // 全局变量
    let currentQuiz = {
      grade: '1-2',
      questions: [],
      currentQuestion: 0,
      answers: [],
      startTime: null,
      timerInterval: null
    };

    // DOM 元素
    const welcomeScreen = document.getElementById('welcome-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const certificateScreen = document.getElementById('certificate-screen');
    const startQuizBtn = document.getElementById('start-quiz');
    const prevQuestionBtn = document.getElementById('prev-question');
    const nextQuestionBtn = document.getElementById('next-question');
    const generateCertificateBtn = document.getElementById('generate-certificate');
    const saveCertificateBtn = document.getElementById('save-certificate');
    const restartQuizBtn = document.getElementById('restart-quiz');
    const gradeLevelSelect = document.getElementById('grade-level');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const quizProgress = document.getElementById('quiz-progress');
    const progressBar = document.getElementById('progress-bar');
    const timer = document.getElementById('timer');
    const correctCount = document.getElementById('correct-count');
    const incorrectCount = document.getElementById('incorrect-count');
    const score = document.getElementById('score');
    const scoreBar = document.getElementById('score-bar');
    const performanceText = document.getElementById('performance-text');
    const studentNameInput = document.getElementById('student-name');
    const certificateName = document.getElementById('certificate-name');
    const certificateScore = document.getElementById('certificate-score');
    const certificateDate = document.getElementById('certificate-date');

    // 工具函数
    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function getPerformanceText(score) {
      if (score >= 90) return "太棒了！你的英语词汇量非常出色！";
      if (score >= 70) return "做得很好！你对这些单词掌握得很不错。";
      if (score >= 50) return "还不错！再努力一下就能更上一层楼了。";
      return "继续加油！多学习一些单词，你会进步很快的！";
    }

    // 测验逻辑
    function startQuiz() {
      currentQuiz.grade = gradeLevelSelect.value;
      currentQuiz.questions = shuffleArray(vocabularyDB[currentQuiz.grade]).slice(0, 10);
      currentQuiz.currentQuestion = 0;
      currentQuiz.answers = Array(10).fill(null);

      // 开始计时
      let seconds = 0;
      currentQuiz.startTime = new Date();
      timer.textContent = '00:00';

      if (currentQuiz.timerInterval) {
        clearInterval(currentQuiz.timerInterval);
      }

      currentQuiz.timerInterval = setInterval(() => {
        seconds++;
        timer.textContent = formatTime(seconds);
      }, 1000);

      renderQuestion();
      welcomeScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');
    }

    function renderQuestion() {
      const question = currentQuiz.questions[currentQuiz.currentQuestion];
      questionText.textContent = `“${question.english}”的中文意思是什么？`;

      // 清空选项容器
      optionsContainer.innerHTML = '';

      // 打乱选项顺序
      const shuffledOptions = shuffleArray(question.options);

      // 添加选项按钮
      shuffledOptions.forEach((option, index) => {
        const button = document.createElement('button');
        button.className = 'option-btn w-full text-left p-4 border border-gray-300 rounded-lg hover:border-primary hover:bg-primary/5 transition-colors duration-300';
        button.textContent = option;

        // 如果该题已作答，高亮显示已选选项
        if (currentQuiz.answers[currentQuiz.currentQuestion] === index) {
          button.classList.add('border-primary', 'bg-primary/5');
        }

        button.addEventListener('click', () => selectAnswer(index));
        optionsContainer.appendChild(button);
      });

      // 更新进度
      quizProgress.textContent = `问题 ${currentQuiz.currentQuestion + 1}/10`;
      progressBar.style.width = `${(currentQuiz.currentQuestion + 1) * 10}%`;

      // 更新按钮状态
      prevQuestionBtn.disabled = currentQuiz.currentQuestion === 0;
      nextQuestionBtn.textContent = currentQuiz.currentQuestion === 9 ? '完成测验' : '下一题';
    }

    function selectAnswer(optionIndex) {
      // 移除之前选中的选项样式
      const optionButtons = document.querySelectorAll('.option-btn');
      optionButtons.forEach(btn => {
        btn.classList.remove('border-primary', 'bg-primary/5');
      });

      // 添加选中样式
      optionButtons[optionIndex].classList.add('border-primary', 'bg-primary/5');

      // 保存答案
      currentQuiz.answers[currentQuiz.currentQuestion] = optionIndex;
    }

    function goToPrevQuestion() {
      if (currentQuiz.currentQuestion > 0) {
        currentQuiz.currentQuestion--;
        renderQuestion();
      }
    }

    function goToNextQuestion() {
      if (currentQuiz.currentQuestion < 9) {
        currentQuiz.currentQuestion++;
        renderQuestion();
      } else {
        // 完成测验，计算结果
        finishQuiz();
      }
    }

    function finishQuiz() {
      // 停止计时器
      clearInterval(currentQuiz.timerInterval);

      // 计算正确答案数量
      const correct = currentQuiz.answers.reduce((count, answerIndex, i) => {
        const question = currentQuiz.questions[i];
        return answerIndex !== null && question.options[answerIndex] === question.chinese ? count + 1 : count;
      }, 0);

      const incorrect = 10 - correct;
      const scoreValue = correct * 10;

      // 更新结果页面
      correctCount.textContent = correct;
      incorrectCount.textContent = incorrect;
      score.textContent = scoreValue;
      scoreBar.style.width = `${scoreValue}%`;
      performanceText.textContent = getPerformanceText(scoreValue);

      // 显示结果页面
      quizScreen.classList.add('hidden');
      resultScreen.classList.remove('hidden');
    }

    function generateCertificate() {
      const name = studentNameInput.value.trim() || '同学';
      certificateName.textContent = name;
      certificateScore.textContent = score.textContent;

      // 设置当前日期
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth() + 1;
      const day = today.getDate();
      certificateDate.textContent = `${year}年${month}月${day}日`;

      // 显示证书页面
      resultScreen.classList.add('hidden');
      certificateScreen.classList.remove('hidden');

      // 添加庆祝动画
      certificateScreen.querySelector('.certificate-border').classList.add('celebration');
    }

    function saveCertificate() {
      alert('证书已保存到本地相册！');
    }

    function restartQuiz() {
      certificateScreen.classList.add('hidden');
      welcomeScreen.classList.remove('hidden');
    }

    // 事件监听
    startQuizBtn.addEventListener('click', startQuiz);
    prevQuestionBtn.addEventListener('click', goToPrevQuestion);
    nextQuestionBtn.addEventListener('click', goToNextQuestion);
    generateCertificateBtn.addEventListener('click', generateCertificate);
    saveCertificateBtn.addEventListener('click', saveCertificate);
    restartQuizBtn.addEventListener('click', restartQuiz);
  </script>
</body>
</html>
